---
import CTAButton from '@/components/CTAButton.astro';
import ScrollIndicator from '@/components/ScrollIndicator.astro';
import desktopImage from '@assets/hero-1920.webp';
import mobileImage from '@assets/hero-768.webp';
import type { HeroProps } from '../types/Hero.types';
const { HeroTitle, HeroSubtitle, CTA, Discover } = Astro.props as HeroProps;
---

<section
  id="hero"
  class="relative flex min-h-screen flex-col items-center justify-between overflow-hidden pb-8"
>
  <div id="hero-sentinel" class="absolute top-0 h-1 w-full"></div>
  <!-- Background image -->
  <picture class="absolute inset-0 -z-10">
    <source srcset={mobileImage.src} media="(max-width: 768px)" type="image/webp" />
    <img
      src={desktopImage.src}
      alt=""
      width="1920"
      height="960"
      class="h-full w-full object-cover"
      loading="eager"
      fetchpriority="high"
    />
  </picture>
  <!-- Overlay -->
  <div class="absolute inset-0 bg-linear-to-b from-black/50 via-black/40 to-black/20"></div>

  <!-- Top spacer - maintains content centering -->
  <div class="h-10"></div>

  <!-- Content -->
  <div class="relative z-10 container mx-auto px-4 text-left lg:px-8">
    <div class="max-w-4xl space-y-8">
      <h1
        class="font-heading text-primary-foreground animate-fade-up fade-up-title text-4xl leading-tight font-bold md:text-5xl lg:text-6xl xl:text-7xl"
      >
        {HeroTitle}
      </h1>

      <p
        class="text-primary-foreground/90 animate-fade-up fade-up-subtitle max-w-2xl text-lg md:text-xl lg:text-2xl"
      >
        {HeroSubtitle}
      </p>
      <div class="animate-fade-up fade-up-cta flex flex-col justify-start gap-4 pt-12 sm:flex-row">
        {
          CTA.map((cta: { text: string; href: string; style: string }) =>
            cta.style === 'primary' ? (
              <CTAButton href={cta.href}>{cta.text}</CTAButton>
            ) : (
              <a
                href={cta.href}
                class="text-primary-foreground/80 hover:text-primary-foreground inline-flex items-center justify-center rounded-xl px-8 py-3 text-lg font-medium underline-offset-4 transition-all hover:-translate-y-0.5 hover:underline"
              >
                {cta.text}
              </a>
            )
          )
        }
      </div>
    </div>
  </div>

  <!-- Scroll indicator -->
  <ScrollIndicator href={Discover.href} text={Discover.text} position="relative mb-0 md:mb-4" />
</section>

<style>
  .fade-up-title {
    --dur: 0.7s;
    --delay: 0.15s;
    --offset: 24px;
  }

  .fade-up-subtitle {
    --dur: 1s;
    --delay: 0.35s;
    --offset: 16px;
  }

  .fade-up-cta {
    --dur: 1.05s;
    --delay: 0.55s;
    --offset: 10px;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-fade-up {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
  }
</style>
